<html lang="en">

<head>

    <script class="injected-ffc2e83d85">
        (function () {
            'use strict'; function q(b) { var c = 0; return function () { return c < b.length ? { done: !1, value: b[c++] } : { done: !0 } } } function t(b) { var c = typeof Symbol != "undefined" && Symbol.iterator && b[Symbol.iterator]; if (c) return c.call(b); if (typeof b.length == "number") return { next: q(b) }; throw Error(String(b) + " is not an iterable or ArrayLike") } var u = typeof Object.defineProperties == "function" ? Object.defineProperty : function (b, c, g) { if (b == Array.prototype || b == Object.prototype) return b; b[c] = g.value; return b }
            function v(b) { b = ["object" == typeof globalThis && globalThis, b, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global]; for (var c = 0; c < b.length; ++c) { var g = b[c]; if (g && g.Math == Math) return g } throw Error("Cannot find global object") } var w = v(this); function x(b, c) { if (c) a: { var g = w; b = b.split("."); for (var h = 0; h < b.length - 1; h++) { var l = b[h]; if (!(l in g)) break a; g = g[l] } b = b[b.length - 1]; h = g[b]; c = c(h); c != h && c != null && u(g, b, { configurable: !0, writable: !0, value: c }) } }
            function y() { this.j = !1; this.g = null; this.u = void 0; this.h = 1; this.v = this.l = 0; this.i = null } function z(b) { if (b.j) throw new TypeError("Generator is already running"); b.j = !0 } y.prototype.o = function (b) { this.u = b }; function A(b, c) { b.i = { I: c, J: !0 }; b.h = b.l || b.v } y.prototype.return = function (b) { this.i = { return: b }; this.h = this.v }; function B(b) { this.g = new y; this.h = b } function E(b, c) { z(b.g); var g = b.g.g; if (g) return F(b, "return" in g ? g["return"] : function (h) { return { value: h, done: !0 } }, c, b.g.return); b.g.return(c); return G(b) }
            function F(b, c, g, h) { try { var l = c.call(b.g.g, g); if (!(l instanceof Object)) throw new TypeError("Iterator result " + l + " is not an object"); if (!l.done) return b.g.j = !1, l; var m = l.value } catch (f) { return b.g.g = null, A(b.g, f), G(b) } b.g.g = null; h.call(b.g, m); return G(b) } function G(b) { for (; b.g.h;)try { var c = b.h(b.g); if (c) return b.g.j = !1, { value: c.value, done: !1 } } catch (g) { b.g.u = void 0, A(b.g, g) } b.g.j = !1; if (b.g.i) { c = b.g.i; b.g.i = null; if (c.J) throw c.I; return { value: c.return, done: !0 } } return { value: void 0, done: !0 } }
            function H(b) { this.next = function (c) { z(b.g); b.g.g ? c = F(b, b.g.g.next, c, b.g.o) : (b.g.o(c), c = G(b)); return c }; this.throw = function (c) { z(b.g); b.g.g ? c = F(b, b.g.g["throw"], c, b.g.o) : (A(b.g, c), c = G(b)); return c }; this.return = function (c) { return E(b, c) }; this[Symbol.iterator] = function () { return this } } function I(b) { function c(h) { return b.next(h) } function g(h) { return b.throw(h) } return new Promise(function (h, l) { function m(f) { f.done ? h(f.value) : Promise.resolve(f.value).then(c, g).then(m, l) } m(b.next()) }) }
            x("Symbol", function (b) { function c(m) { if (this instanceof c) throw new TypeError("Symbol is not a constructor"); return new g(h + (m || "") + "_" + l++, m) } function g(m, f) { this.g = m; u(this, "description", { configurable: !0, writable: !0, value: f }) } if (b) return b; g.prototype.toString = function () { return this.g }; var h = "jscomp_symbol_" + (Math.random() * 1E9 >>> 0) + "_", l = 0; return c })
            x("Symbol.iterator", function (b) { if (b) return b; b = Symbol("Symbol.iterator"); u(Array.prototype, b, { configurable: !0, writable: !0, value: function () { return J(q(this)) } }); return b }); function J(b) { b = { next: b }; b[Symbol.iterator] = function () { return this }; return b }
            x("Promise", function (b) {
                function c(f) { this.h = 0; this.i = void 0; this.g = []; this.u = !1; var a = this.j(); try { f(a.resolve, a.reject) } catch (d) { a.reject(d) } } function g() { this.g = null } function h(f) { return f instanceof c ? f : new c(function (a) { a(f) }) } if (b) return b; g.prototype.h = function (f) { if (this.g == null) { this.g = []; var a = this; this.i(function () { a.l() }) } this.g.push(f) }; var l = w.setTimeout; g.prototype.i = function (f) { l(f, 0) }; g.prototype.l = function () {
                    for (; this.g && this.g.length;) {
                        var f = this.g; this.g = []; for (var a = 0; a < f.length; ++a) {
                            var d =
                                f[a]; f[a] = null; try { d() } catch (e) { this.j(e) }
                        }
                    } this.g = null
                }; g.prototype.j = function (f) { this.i(function () { throw f }) }; c.prototype.j = function () { function f(e) { return function (k) { d || (d = !0, e.call(a, k)) } } var a = this, d = !1; return { resolve: f(this.D), reject: f(this.l) } }; c.prototype.D = function (f) { if (f === this) this.l(new TypeError("A Promise cannot resolve to itself")); else if (f instanceof c) this.G(f); else { a: switch (typeof f) { case "object": var a = f != null; break a; case "function": a = !0; break a; default: a = !1 }a ? this.C(f) : this.o(f) } }
                c.prototype.C = function (f) { var a = void 0; try { a = f.then } catch (d) { this.l(d); return } typeof a == "function" ? this.H(a, f) : this.o(f) }; c.prototype.l = function (f) { this.v(2, f) }; c.prototype.o = function (f) { this.v(1, f) }; c.prototype.v = function (f, a) { if (this.h != 0) throw Error("Cannot settle(" + f + ", " + a + "): Promise already settled in state" + this.h); this.h = f; this.i = a; this.h === 2 && this.F(); this.K() }; c.prototype.F = function () { var f = this; l(function () { if (f.B()) { var a = w.console; typeof a !== "undefined" && a.error(f.i) } }, 1) }; c.prototype.B =
                    function () { if (this.u) return !1; var f = w.CustomEvent, a = w.Event, d = w.dispatchEvent; if (typeof d === "undefined") return !0; typeof f === "function" ? f = new f("unhandledrejection", { cancelable: !0 }) : typeof a === "function" ? f = new a("unhandledrejection", { cancelable: !0 }) : (f = w.document.createEvent("CustomEvent"), f.initCustomEvent("unhandledrejection", !1, !0, f)); f.promise = this; f.reason = this.i; return d(f) }; c.prototype.K = function () { if (this.g != null) { for (var f = 0; f < this.g.length; ++f)m.h(this.g[f]); this.g = null } }; var m = new g; c.prototype.G =
                        function (f) { var a = this.j(); f.A(a.resolve, a.reject) }; c.prototype.H = function (f, a) { var d = this.j(); try { f.call(a, d.resolve, d.reject) } catch (e) { d.reject(e) } }; c.prototype.then = function (f, a) { function d(n, r) { return typeof n == "function" ? function (C) { try { e(n(C)) } catch (D) { k(D) } } : r } var e, k, p = new c(function (n, r) { e = n; k = r }); this.A(d(f, e), d(a, k)); return p }; c.prototype.catch = function (f) { return this.then(void 0, f) }; c.prototype.A = function (f, a) {
                            function d() {
                                switch (e.h) {
                                    case 1: f(e.i); break; case 2: a(e.i); break; default: throw Error("Unexpected state: " +
                                        e.h)
                                }
                            } var e = this; this.g == null ? m.h(d) : this.g.push(d); this.u = !0
                        }; c.resolve = h; c.reject = function (f) { return new c(function (a, d) { d(f) }) }; c.race = function (f) { return new c(function (a, d) { for (var e = t(f), k = e.next(); !k.done; k = e.next())h(k.value).A(a, d) }) }; c.all = function (f) { var a = t(f), d = a.next(); return d.done ? h([]) : new c(function (e, k) { function p(C) { return function (D) { n[C] = D; r--; r == 0 && e(n) } } var n = [], r = 0; do n.push(void 0), r++, h(d.value).A(p(n.length - 1), k), d = a.next(); while (!d.done) }) }; return c
            })
            function K(b, c) { return Object.prototype.hasOwnProperty.call(b, c) } x("Object.is", function (b) { return b ? b : function (c, g) { return c === g ? c !== 0 || 1 / c === 1 / g : c !== c && g !== g } }); x("Array.prototype.includes", function (b) { return b ? b : function (c, g) { var h = this; h instanceof String && (h = String(h)); var l = h.length; g = g || 0; for (g < 0 && (g = Math.max(g + l, 0)); g < l; g++) { var m = h[g]; if (m === c || Object.is(m, c)) return !0 } return !1 } })
            x("String.prototype.includes", function (b) { return b ? b : function (c, g) { if (this == null) throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined"); if (c instanceof RegExp) throw new TypeError("First argument to String.prototype.includes must not be a regular expression"); return this.indexOf(c, g || 0) !== -1 } })
            x("WeakMap", function (b) {
                function c(d) { this.g = (a += Math.random() + 1).toString(); if (d) { d = t(d); for (var e; !(e = d.next()).done;)e = e.value, this.set(e[0], e[1]) } } function g() { } function h(d) { var e = typeof d; return e === "object" && d !== null || e === "function" } function l(d) { if (!K(d, f)) { var e = new g; u(d, f, { value: e }) } } function m(d) { var e = Object[d]; e && (Object[d] = function (k) { if (k instanceof g) return k; Object.isExtensible(k) && l(k); return e(k) }) } if (function () {
                    if (!b || !Object.seal) return !1; try {
                        var d = Object.seal({}), e = Object.seal({}),
                        k = new b([[d, 2], [e, 3]]); if (k.get(d) != 2 || k.get(e) != 3) return !1; k.delete(d); k.set(e, 4); return !k.has(d) && k.get(e) == 4
                    } catch (p) { return !1 }
                }()) return b; var f = "$jscomp_hidden_" + Math.random(); m("freeze"); m("preventExtensions"); m("seal"); var a = 0; c.prototype.set = function (d, e) { if (!h(d)) throw Error("Invalid WeakMap key"); l(d); if (!K(d, f)) throw Error("WeakMap key fail: " + d); d[f][this.g] = e; return this }; c.prototype.get = function (d) { return h(d) && K(d, f) ? d[f][this.g] : void 0 }; c.prototype.has = function (d) {
                    return h(d) && K(d,
                        f) && K(d[f], this.g)
                }; c.prototype.delete = function (d) { return h(d) && K(d, f) && K(d[f], this.g) ? delete d[f][this.g] : !1 }; return c
            })
            x("Map", function (b) {
                function c() { var a = {}; return a.m = a.next = a.head = a } function g(a, d) { var e = a[1]; return J(function () { if (e) { for (; e.head != a[1];)e = e.m; for (; e.next != e.head;)return e = e.next, { done: !1, value: d(e) }; e = null } return { done: !0, value: void 0 } }) } function h(a, d) {
                    var e = d && typeof d; e == "object" || e == "function" ? m.has(d) ? e = m.get(d) : (e = "" + ++f, m.set(d, e)) : e = "p_" + d; var k = a[0][e]; if (k && K(a[0], e)) for (a = 0; a < k.length; a++) { var p = k[a]; if (d !== d && p.key !== p.key || d === p.key) return { id: e, list: k, index: a, entry: p } } return {
                        id: e,
                        list: k, index: -1, entry: void 0
                    }
                } function l(a) { this[0] = {}; this[1] = c(); this.size = 0; if (a) { a = t(a); for (var d; !(d = a.next()).done;)d = d.value, this.set(d[0], d[1]) } } if (function () {
                    if (!b || typeof b != "function" || !b.prototype.entries || typeof Object.seal != "function") return !1; try {
                        var a = Object.seal({ x: 4 }), d = new b(t([[a, "s"]])); if (d.get(a) != "s" || d.size != 1 || d.get({ x: 4 }) || d.set({ x: 4 }, "t") != d || d.size != 2) return !1; var e = d.entries(), k = e.next(); if (k.done || k.value[0] != a || k.value[1] != "s") return !1; k = e.next(); return k.done || k.value[0].x !=
                            4 || k.value[1] != "t" || !e.next().done ? !1 : !0
                    } catch (p) { return !1 }
                }()) return b; var m = new WeakMap; l.prototype.set = function (a, d) { a = a === 0 ? 0 : a; var e = h(this, a); e.list || (e.list = this[0][e.id] = []); e.entry ? e.entry.value = d : (e.entry = { next: this[1], m: this[1].m, head: this[1], key: a, value: d }, e.list.push(e.entry), this[1].m.next = e.entry, this[1].m = e.entry, this.size++); return this }; l.prototype.delete = function (a) {
                    a = h(this, a); return a.entry && a.list ? (a.list.splice(a.index, 1), a.list.length || delete this[0][a.id], a.entry.m.next = a.entry.next,
                        a.entry.next.m = a.entry.m, a.entry.head = null, this.size--, !0) : !1
                }; l.prototype.clear = function () { this[0] = {}; this[1] = this[1].m = c(); this.size = 0 }; l.prototype.has = function (a) { return !!h(this, a).entry }; l.prototype.get = function (a) { return (a = h(this, a).entry) && a.value }; l.prototype.entries = function () { return g(this, function (a) { return [a.key, a.value] }) }; l.prototype.keys = function () { return g(this, function (a) { return a.key }) }; l.prototype.values = function () { return g(this, function (a) { return a.value }) }; l.prototype.forEach =
                    function (a, d) { for (var e = this.entries(), k; !(k = e.next()).done;)k = k.value, a.call(d, k[1], k[0], this) }; l.prototype[Symbol.iterator] = l.prototype.entries; var f = 0; return l
            })
            x("Set", function (b) {
                function c(g) { this.g = new Map; if (g) { g = t(g); for (var h; !(h = g.next()).done;)this.add(h.value) } this.size = this.g.size } if (function () {
                    if (!b || typeof b != "function" || !b.prototype.entries || typeof Object.seal != "function") return !1; try {
                        var g = Object.seal({ x: 4 }), h = new b(t([g])); if (!h.has(g) || h.size != 1 || h.add(g) != h || h.size != 1 || h.add({ x: 4 }) != h || h.size != 2) return !1; var l = h.entries(), m = l.next(); if (m.done || m.value[0] != g || m.value[1] != g) return !1; m = l.next(); return m.done || m.value[0] == g || m.value[0].x != 4 ||
                            m.value[1] != m.value[0] ? !1 : l.next().done
                    } catch (f) { return !1 }
                }()) return b; c.prototype.add = function (g) { g = g === 0 ? 0 : g; this.g.set(g, g); this.size = this.g.size; return this }; c.prototype.delete = function (g) { g = this.g.delete(g); this.size = this.g.size; return g }; c.prototype.clear = function () { this.g.clear(); this.size = 0 }; c.prototype.has = function (g) { return this.g.has(g) }; c.prototype.entries = function () { return this.g.entries() }; c.prototype.values = function () { return this.g.values() }; c.prototype.keys = c.prototype.values; c.prototype[Symbol.iterator] =
                    c.prototype.values; c.prototype.forEach = function (g, h) { var l = this; this.g.forEach(function (m) { return g.call(h, m, m, l) }) }; return c
            }); (function () {
                function b() {
                    return m ? Promise.resolve(m) : f ? f : f = fetch("https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json").then(function (a) { if (!a.ok) throw Error("HTTP error! status: " + a.status + " fetching https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json"); return a.json() }).then(function (a) {
                        if (!Array.isArray(a)) throw new TypeError("Fetched icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json is not an array.")
                        return m = a
                    }).catch(function (a) { console.error("IconChecker: Failed to load valid icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json.", a); f = null; throw a })
                } function c(a) {
                    var d, e, k, p; return I(new H(new B(function (n) {
                        switch (n.h) {
                            case 1: d = (a.textContent || "").trim(); if (!d || a.classList.contains("js-replaced-missing-icon") && d === "radio_button_unchecked") return n.return(); e = window.getComputedStyle(a); if (e.display === "none" || e.visibility === "hidden") return n.return()
                                n.l = 2; var r = b(); n.h = 4; return { value: r }; case 4: k = n.u; n.h = 3; n.l = 0; break; case 2: return n.l = 0, n.i = null, console.warn('IconChecker: Skipping check for icon "' + d + '" as valid names could not be loaded.'), n.return(); case 3: (p = k.includes(d)) ? a.classList.contains("js-replaced-missing-icon") && a.classList.remove("js-replaced-missing-icon") : d === "radio_button_unchecked" && a.classList.contains("js-replaced-missing-icon") || (a.textContent = "radio_button_unchecked", a.classList.add("js-replaced-missing-icon")), n.h = 0
                        }
                    })))
                }
                function g(a) { a = a === void 0 ? document.body : a; a.querySelectorAll(l).forEach(function (d) { c(d) }) } function h() {
                    b().catch(function () { }); document.fonts.ready.then(function () {
                        requestAnimationFrame(function () {
                            g(document.body); (new MutationObserver(function (a) {
                                var d = new Set; a = t(a); for (var e = a.next(); !e.done; e = a.next())if (e = e.value, e.type === "childList") e.addedNodes.forEach(function (p) { p.nodeType === Node.ELEMENT_NODE && (p.matches(l) && d.add(p), p.querySelectorAll(l).forEach(function (n) { d.add(n) })) }); else if (e.type ===
                                    "attributes" && e.attributeName === "class") { var k = e.target; e.target.nodeType === Node.ELEMENT_NODE && k.matches(l) && d.add(k) } else e.type === "characterData" && e.target.parentNode && (e = e.target.parentNode, e.nodeType === Node.ELEMENT_NODE && e.matches(l) && d.add(e)); d.size > 0 && setTimeout(function () { d.forEach(function (p) { c(p) }) }, 500)
                            })).observe(document.body, { childList: !0, subtree: !0, attributes: !0, attributeFilter: ["class"], characterData: !0 })
                        })
                    }).catch(function (a) {
                        console.error("IconChecker: Font loading error. Scanning icons anyway.",
                            a); requestAnimationFrame(function () { g(document.body) })
                    })
                } var l = ["material-icons", "material-symbols-outlined", "material-symbols-rounded", "material-symbols-sharp"].map(function (a) { return "." + a }).join(","), m = null, f = null; document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", function () { h() }) : h()
            })()
        }).call(this);


    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Load Balancer | System Design Architect</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&amp;family=Inter:wght@300;400;600;700&amp;display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    <style>
        :root {
            --bg-dark: #0a0c10;
            --card-bg: #161b22;
            --accent-cyan: #4fd1c5;
            --accent-emerald: #10b981;
            --accent-rose: #f43f5e;
            --border-color: #30363d;
        }

        body {
            background-color: var(--bg-dark);
            color: #e6edf3;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .mono {
            font-family: 'Fira Code', monospace;
        }

        .svg-container {
            filter: drop-shadow(0 0 10px rgba(79, 209, 197, 0.1));
        }

        /* Animation: Packet Flow */
        .packet {
            fill: var(--accent-cyan);
            filter: drop-shadow(0 0 5px var(--accent-cyan));
            visibility: hidden;
        }

        .animate-packet {
            visibility: visible;
            animation: flow 2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes flow {
            from {
                offset-distance: 0%;
            }

            to {
                offset-distance: 100%;
            }
        }

        /* Server States */
        .server-box {
            transition: all 0.4s ease;
            stroke-width: 2;
            cursor: pointer;
        }

        .server-box.online {
            stroke: var(--accent-emerald);
            fill: rgba(16, 185, 129, 0.05);
        }

        .server-box.offline {
            stroke: var(--accent-rose);
            fill: rgba(244, 63, 94, 0.1);
        }

        .server-label {
            transition: fill 0.4s ease;
        }

        /* Connection Paths */
        .path-line {
            stroke: var(--border-color);
            stroke-width: 1.5;
            fill: none;
            transition: stroke 0.3s ease;
        }

        .path-line.active {
            stroke: var(--accent-cyan);
            stroke-dasharray: 5;
            animation: dash 10s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -100;
            }
        }

        /* Glow effects */
        .glow-cyan {
            text-shadow: 0 0 8px rgba(79, 209, 197, 0.6);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 10px;
        }

        .panel-glass {
            background: rgba(22, 27, 34, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid var(--border-color);
        }

        .log-entry {
            border-left: 2px solid var(--accent-cyan);
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .relative {
            position: relative
        }

        .order-1 {
            order: 1
        }

        .order-2 {
            order: 2
        }

        .mb-1 {
            margin-bottom: 0.25rem
        }

        .mb-3 {
            margin-bottom: 0.75rem
        }

        .mb-4 {
            margin-bottom: 1rem
        }

        .mb-6 {
            margin-bottom: 1.5rem
        }

        .mt-4 {
            margin-top: 1rem
        }

        .mr-2 {
            margin-right: 0.5rem
        }

        .flex {
            display: flex
        }

        .h-2 {
            height: 0.5rem
        }

        .h-32 {
            height: 8rem
        }

        .h-full {
            height: 100%
        }

        .max-h-\[400px\] {
            max-height: 400px
        }

        .min-h-\[500px\] {
            min-height: 500px
        }

        .min-h-screen {
            min-height: 100vh
        }

        .w-2 {
            width: 0.5rem
        }

        .w-full {
            width: 100%
        }

        .flex-1 {
            flex: 1 1 0%
        }

        .transform {
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .flex-col {
            flex-direction: column
        }

        .flex-col-reverse {
            flex-direction: column-reverse
        }

        .items-center {
            align-items: center
        }

        .justify-center {
            justify-content: center
        }

        .justify-between {
            justify-content: space-between
        }

        .gap-1 {
            gap: 0.25rem
        }

        .gap-2 {
            gap: 0.5rem
        }

        .gap-4 {
            gap: 1rem
        }

        .space-y-1> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.25rem * var(--tw-space-y-reverse))
        }

        .space-y-2> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.5rem * var(--tw-space-y-reverse))
        }

        .space-y-4> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1rem * var(--tw-space-y-reverse))
        }

        .space-y-6> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1.5rem * var(--tw-space-y-reverse))
        }

        .overflow-hidden {
            overflow: hidden
        }

        .overflow-y-auto {
            overflow-y: auto
        }

        .rounded-full {
            border-radius: 9999px
        }

        .rounded-lg {
            border-radius: 0.5rem
        }

        .rounded-xl {
            border-radius: 0.75rem
        }

        .rounded {
            border-radius: 0.25rem
        }

        .border {
            border-width: 1px
        }

        .border-t {
            border-top-width: 1px
        }

        .border-slate-700 {
            --tw-border-opacity: 1;
            border-color: rgb(51 65 85 / var(--tw-border-opacity, 1))
        }

        .border-emerald-500\/50 {
            border-color: rgb(16 185 129 / 0.5)
        }

        .bg-black\/40 {
            background-color: rgb(0 0 0 / 0.4)
        }

        .bg-emerald-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(16 185 129 / var(--tw-bg-opacity, 1))
        }

        .bg-rose-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(244 63 94 / var(--tw-bg-opacity, 1))
        }

        .bg-slate-800 {
            --tw-bg-opacity: 1;
            background-color: rgb(30 41 59 / var(--tw-bg-opacity, 1))
        }

        .bg-teal-500 {
            --tw-bg-opacity: 1;
            background-color: rgb(20 184 166 / var(--tw-bg-opacity, 1))
        }

        .bg-emerald-500\/20 {
            background-color: rgb(16 185 129 / 0.2)
        }

        .bg-slate-800\/50 {
            background-color: rgb(30 41 59 / 0.5)
        }

        .p-2 {
            padding: 0.5rem
        }

        .p-4 {
            padding: 1rem
        }

        .p-6 {
            padding: 1.5rem
        }

        .p-3 {
            padding: 0.75rem
        }

        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem
        }

        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem
        }

        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem
        }

        .pt-4 {
            padding-top: 1rem
        }

        .pl-2 {
            padding-left: 0.5rem
        }

        .font-mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem
        }

        .text-\[10px\] {
            font-size: 10px
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem
        }

        .font-bold {
            font-weight: 700
        }

        .font-semibold {
            font-weight: 600
        }

        .uppercase {
            text-transform: uppercase
        }

        .leading-relaxed {
            line-height: 1.625
        }

        .tracking-tight {
            letter-spacing: -0.025em
        }

        .tracking-widest {
            letter-spacing: 0.1em
        }

        .text-emerald-400 {
            --tw-text-opacity: 1;
            color: rgb(52 211 153 / var(--tw-text-opacity, 1))
        }

        .text-slate-200 {
            --tw-text-opacity: 1;
            color: rgb(226 232 240 / var(--tw-text-opacity, 1))
        }

        .text-slate-400 {
            --tw-text-opacity: 1;
            color: rgb(148 163 184 / var(--tw-text-opacity, 1))
        }

        .text-slate-500 {
            --tw-text-opacity: 1;
            color: rgb(100 116 139 / var(--tw-text-opacity, 1))
        }

        .text-slate-900 {
            --tw-text-opacity: 1;
            color: rgb(15 23 42 / var(--tw-text-opacity, 1))
        }

        .text-teal-400 {
            --tw-text-opacity: 1;
            color: rgb(45 212 191 / var(--tw-text-opacity, 1))
        }

        .text-slate-300 {
            --tw-text-opacity: 1;
            color: rgb(203 213 225 / var(--tw-text-opacity, 1))
        }

        .text-slate-600 {
            --tw-text-opacity: 1;
            color: rgb(71 85 105 / var(--tw-text-opacity, 1))
        }

        .shadow-2xl {
            --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .transition-colors {
            transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .hover\:bg-teal-400:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(45 212 191 / var(--tw-bg-opacity, 1))
        }

        .focus\:border-teal-400:focus {
            --tw-border-opacity: 1;
            border-color: rgb(45 212 191 / var(--tw-border-opacity, 1))
        }

        .focus\:outline-none:focus {
            outline: 2px solid transparent;
            outline-offset: 2px
        }

        .active\:scale-95:active {
            --tw-scale-x: .95;
            --tw-scale-y: .95;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        @media (min-width: 768px) {
            .md\:order-1 {
                order: 1
            }

            .md\:order-2 {
                order: 2
            }

            .md\:max-h-none {
                max-height: none
            }

            .md\:w-96 {
                width: 24rem
            }

            .md\:flex-row {
                flex-direction: row
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col md:flex-row p-4 gap-4">

    <!-- Sidebar: Controls and Education -->
    <aside class="w-full md:w-96 flex flex-col gap-4 order-2 md:order-1">

        <!-- Controls Panel -->
        <section class="panel-glass rounded-xl p-6 shadow-2xl">
            <div class="flex items-center gap-2 mb-6">
                <span class="material-symbols-outlined text-teal-400">settings_input_component</span>
                <h2 class="text-xl font-bold tracking-tight">System Controller</h2>
            </div>

            <div class="space-y-4">
                <button id="simulateBtn"
                    class="w-full bg-teal-500 hover:bg-teal-400 text-slate-900 font-bold py-3 px-4 rounded-lg transition-all transform active:scale-95 flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined">send</span>
                    SIMULATE REQUEST
                </button>

                <div class="pt-4 border-t border-slate-700">
                    <p class="text-xs uppercase tracking-widest text-slate-500 font-semibold mb-3">Server Management</p>
                    <div id="serverControls" class="space-y-2">
                        <!-- JS populated toggles -->
                        <div
                            class="flex items-center justify-between p-3 rounded-lg bg-slate-800/50 border border-slate-700">
                            <span class="mono text-xs text-slate-300">NODE_S1</span>
                            <button onclick="toggleServer('s1')" id="btn-s1"
                                class="px-3 py-1 rounded text-[10px] font-bold tracking-widest transition-colors bg-emerald-500/20 text-emerald-400 border border-emerald-500/50">
                                ONLINE
                            </button>
                        </div>
                        <div
                            class="flex items-center justify-between p-3 rounded-lg bg-slate-800/50 border border-slate-700">
                            <span class="mono text-xs text-slate-300">NODE_S2</span>
                            <button onclick="toggleServer('s2')" id="btn-s2"
                                class="px-3 py-1 rounded text-[10px] font-bold tracking-widest transition-colors bg-emerald-500/20 text-emerald-400 border border-emerald-500/50">
                                ONLINE
                            </button>
                        </div>
                        <div
                            class="flex items-center justify-between p-3 rounded-lg bg-slate-800/50 border border-slate-700">
                            <span class="mono text-xs text-slate-300">NODE_S3</span>
                            <button onclick="toggleServer('s3')" id="btn-s3"
                                class="px-3 py-1 rounded text-[10px] font-bold tracking-widest transition-colors bg-emerald-500/20 text-emerald-400 border border-emerald-500/50">
                                ONLINE
                            </button>
                        </div>
                    </div>
                </div>

                <div class="pt-4 border-t border-slate-700">
                    <p class="text-xs uppercase tracking-widest text-slate-500 font-semibold mb-3">Algorithm Selection
                    </p>
                    <select id="algoSelect"
                        class="w-full bg-slate-800 border border-slate-700 rounded-lg p-2 text-sm mono focus:outline-none focus:border-teal-400">
                        <option value="round-robin">Round Robin</option>
                        <option value="least-conn">Least Connections</option>
                        <option value="random">Random Distribution</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Educational Sidebar -->
        <section class="panel-glass rounded-xl p-6 flex-1 overflow-y-auto max-h-[400px] md:max-h-none">
            <div class="flex items-center gap-2 mb-4">
                <span class="material-symbols-outlined text-emerald-400">menu_book</span>
                <h2 class="text-xl font-bold tracking-tight">Key Concepts</h2>
            </div>

            <div class="space-y-6 text-sm text-slate-400 leading-relaxed">
                <div>
                    <h3 class="text-slate-200 font-semibold mb-1">1. Load Balancer (Reverse Proxy)</h3>
                    <p>Acts as a single entry point for all client requests. It distributes incoming traffic across a
                        pool of healthy servers to prevent any single server from becoming a bottleneck.</p>
                </div>
                <div>
                    <h3 class="text-slate-200 font-semibold mb-1">2. Health Checks</h3>
                    <p>The Load Balancer continuously monitors server availability. If a server fails (try toggling
                        one!), the LB immediately stops routing traffic to it, ensuring zero-downtime.</p>
                </div>
                <div>
                    <h3 class="text-slate-200 font-semibold mb-1">3. Horizontal Scaling</h3>
                    <p>By using an LB, we can add more servers (nodes) to the cluster without changing the client's
                        configuration, allowing the system to handle massive growth.</p>
                </div>
            </div>
        </section>
    </aside>

    <!-- Main Viewport: Architecture Diagram -->
    <main class="flex-1 flex flex-col gap-4 order-1 md:order-2">
        <div class="panel-glass rounded-xl p-4 flex-1 relative min-h-[500px] flex flex-col">

            <header class="flex justify-between items-center mb-4 px-2">
                <div>
                    <h1 class="text-2xl font-bold glow-cyan tracking-tight">High Availability Load Balancer</h1>
                    <p class="text-xs mono text-slate-500 uppercase">Architecture: 1 Client → Nginx LB → Node.js Cluster
                        → MongoDB</p>
                </div>
                <div class="flex items-center gap-4 text-xs mono">
                    <div class="flex items-center gap-1">
                        <div class="w-2 h-2 rounded-full bg-emerald-500"></div> Online
                    </div>
                    <div class="flex items-center gap-1">
                        <div class="w-2 h-2 rounded-full bg-rose-500"></div> Failed
                    </div>
                </div>
            </header>

            <!-- SVG CANVAS -->
            <div class="flex-1 relative overflow-hidden flex items-center justify-center">
                <svg id="architecture" viewBox="0 0 800 500" class="w-full h-full svg-container">
                    <defs>
                        <!-- Glow Gradient -->
                        <radialGradient id="grad-active" cx="50%" cy="50%" r="50%">
                            <stop offset="0%" style="stop-color:rgba(79, 209, 197, 0.4)"></stop>
                            <stop offset="100%" style="stop-color:rgba(79, 209, 197, 0)"></stop>
                        </radialGradient>
                    </defs>

                    <!-- Connection Paths (Static Background) -->
                    <!-- Path: User to LB -->
                    <path id="path-user-lb" class="path-line" d="M100 250 L300 250"></path>

                    <!-- Paths: LB to Servers -->
                    <path id="path-lb-s1" class="path-line" d="M350 250 Q 450 250, 500 100"></path>
                    <path id="path-lb-s2" class="path-line" d="M350 250 Q 450 250, 500 250"></path>
                    <path id="path-lb-s3" class="path-line" d="M350 250 Q 450 250, 500 400"></path>

                    <!-- Paths: Servers to DB -->
                    <path id="path-s1-db" class="path-line" d="M600 100 Q 650 250, 700 250"></path>
                    <path id="path-s2-db" class="path-line" d="M600 250 Q 650 250, 700 250"></path>
                    <path id="path-s3-db" class="path-line" d="M600 400 Q 650 250, 700 250"></path>

                    <!-- User Node -->
                    <g transform="translate(50, 225)">
                        <circle cx="25" cy="25" r="20" fill="none" stroke="var(--border-color)" stroke-width="2">
                        </circle>
                        <path
                            d="M25 15 C 28 15, 32 18, 32 23 C 32 28, 25 35, 25 35 C 25 35, 18 28, 18 23 C 18 18, 22 15, 25 15"
                            fill="var(--accent-cyan)"></path>
                        <text x="25" y="60" text-anchor="middle" class="mono text-[10px]" fill="#888">USER_CLIENT</text>
                    </g>

                    <!-- Load Balancer Node -->
                    <g transform="translate(280, 210)">
                        <rect width="80" height="80" rx="8" class="server-box online"></rect>
                        <text x="40" y="45" text-anchor="middle" class="mono text-[10px] font-bold"
                            fill="white">NGINX_LB</text>
                        <circle cx="40" cy="40" r="30" fill="none" stroke="var(--accent-cyan)" stroke-dasharray="2,4"
                            opacity="0.3">
                            <animateTransform attributeName="transform" type="rotate" from="0 40 40" to="360 40 40"
                                dur="10s" repeatCount="indefinite"></animateTransform>
                        </circle>
                    </g>

                    <!-- Servers -->
                    <!-- Server 1 -->
                    <g id="node-s1" transform="translate(500, 60)">
                        <rect width="100" height="80" rx="8" class="server-box online" id="rect-s1"></rect>
                        <text x="50" y="45" text-anchor="middle" class="mono text-[10px] server-label"
                            fill="white">APP_NODE_01</text>
                        <circle id="status-s1" cx="85" cy="15" r="4" fill="var(--accent-emerald)"></circle>
                    </g>

                    <!-- Server 2 -->
                    <g id="node-s2" transform="translate(500, 210)">
                        <rect width="100" height="80" rx="8" class="server-box online" id="rect-s2"></rect>
                        <text x="50" y="45" text-anchor="middle" class="mono text-[10px] server-label"
                            fill="white">APP_NODE_02</text>
                        <circle id="status-s2" cx="85" cy="15" r="4" fill="var(--accent-emerald)"></circle>
                    </g>

                    <!-- Server 3 -->
                    <g id="node-s3" transform="translate(500, 360)">
                        <rect width="100" height="80" rx="8" class="server-box online" id="rect-s3"></rect>
                        <text x="50" y="45" text-anchor="middle" class="mono text-[10px] server-label"
                            fill="white">APP_NODE_03</text>
                        <circle id="status-s3" cx="85" cy="15" r="4" fill="var(--accent-emerald)"></circle>
                    </g>

                    <!-- Database Node -->
                    <g transform="translate(700, 210)">
                        <path d="M0 10 Q 25 0, 50 10 L 50 70 Q 25 80, 0 70 Z" fill="none" stroke="var(--border-color)"
                            stroke-width="2"></path>
                        <ellipse cx="25" cy="10" rx="25" ry="10" fill="none" stroke="var(--border-color)"
                            stroke-width="2"></ellipse>
                        <text x="25" y="45" text-anchor="middle" class="mono text-[10px]" fill="#888">DB_CLUSTER</text>
                    </g>

                    <!-- Dynamic Packets (Cloned via JS) -->
                    <circle id="templatePacket" r="5" class="packet"></circle>
                </svg>
            </div>

            <!-- Terminal / Logs -->
            <footer
                class="mt-4 p-4 bg-black/40 rounded-lg border border-slate-700 h-32 overflow-y-auto flex flex-col-reverse">
                <div id="logContainer" class="space-y-1 font-mono text-xs">
                    <div class="log-entry pl-2 text-emerald-400"><span class="text-slate-600 mr-2">[22:39:46]</span>
                        Request completed successfully via NODE_S2.</div>
                    <div class="log-entry pl-2 text-slate-300"><span class="text-slate-600 mr-2">[22:39:44]</span>
                        NODE_S2 querying database cluster...</div>
                    <div class="log-entry pl-2 text-slate-300"><span class="text-slate-600 mr-2">[22:39:43]</span> LB
                        routing request to NODE_S2 (Algo: round-robin)</div>
                    <div class="log-entry pl-2 text-slate-300"><span class="text-slate-600 mr-2">[22:39:42]</span>
                        Incoming client request received.</div>
                    <div class="log-entry pl-2 text-emerald-400"><span class="text-slate-600 mr-2">[22:39:40]</span>
                        Request completed successfully via NODE_S1.</div>
                    <div class="log-entry pl-2 text-slate-300"><span class="text-slate-600 mr-2">[22:39:39]</span>
                        NODE_S1 querying database cluster...</div>
                    <div class="log-entry pl-2 text-slate-300"><span class="text-slate-600 mr-2">[22:39:38]</span> LB
                        routing request to NODE_S1 (Algo: round-robin)</div>
                    <div class="log-entry pl-2 text-slate-300"><span class="text-slate-600 mr-2">[22:39:37]</span>
                        Incoming client request received.</div>
                    <div class="text-slate-500">[SYSTEM] System initialized. Waiting for requests...</div>
                </div>
            </footer>
        </div>
    </main>

    <script>
        // System State
        const state = {
            servers: [
                { id: 's1', online: true, connections: 0 },
                { id: 's2', online: true, connections: 0 },
                { id: 's3', online: true, connections: 0 }
            ],
            roundRobinIndex: 0,
            isProcessing: false
        }

        // DOM Elements
        const logContainer = document.getElementById('logContainer')
        const simulateBtn = document.getElementById('simulateBtn')
        const serverControls = document.getElementById('serverControls')
        const algoSelect = document.getElementById('algoSelect')
        const architectureSvg = document.getElementById('architecture')
        const templatePacket = document.getElementById('templatePacket')

        // Initialize Controls
        function initControls() {
            state.servers.forEach(server => {
                const div = document.createElement('div')
                div.className = "flex items-center justify-between p-3 rounded-lg bg-slate-800/50 border border-slate-700"
                div.innerHTML = `
                    <span class="mono text-xs text-slate-300">NODE_${server.id.toUpperCase()}</span>
                    <button onclick="toggleServer('${server.id}')" id="btn-${server.id}" class="px-3 py-1 rounded text-[10px] font-bold tracking-widest transition-colors ${server.online ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/50' : 'bg-rose-500/20 text-rose-400 border border-rose-500/50'}">
                        ${server.online ? 'ONLINE' : 'OFFLINE'}
                    </button>
                `
                serverControls.appendChild(div)

                // Add click listener to SVG rects too
                document.getElementById(`rect-${server.id}`).addEventListener('click', () => toggleServer(server.id))
            })
        }

        // Add System Log
        function addLog(message, type = 'info') {
            const time = new Date().toLocaleTimeString([], { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' })
            const entry = document.createElement('div')
            entry.className = `log-entry pl-2 ${type === 'error' ? 'text-rose-400' : type === 'success' ? 'text-emerald-400' : 'text-slate-300'}`
            entry.innerHTML = `<span class="text-slate-600 mr-2">[${time}]</span> ${message}`
            logContainer.prepend(entry)
        }

        // Toggle Server Status
        function toggleServer(id) {
            const server = state.servers.find(s => s.id === id)
            server.online = !server.online

            // Update UI Button
            const btn = document.getElementById(`btn-${id}`)
            btn.textContent = server.online ? 'ONLINE' : 'OFFLINE'
            btn.className = `px-3 py-1 rounded text-[10px] font-bold tracking-widest transition-colors ${server.online ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/50' : 'bg-rose-500/20 text-rose-400 border border-rose-500/50'}`

            // Update SVG Visuals
            const rect = document.getElementById(`rect-${id}`)
            const statusCircle = document.getElementById(`status-${id}`)

            if (server.online) {
                rect.classList.replace('offline', 'online')
                statusCircle.setAttribute('fill', 'var(--accent-emerald)')
                addLog(`Server NODE_${id.toUpperCase()} is back online.`, 'success')
            } else {
                rect.classList.replace('online', 'offline')
                statusCircle.setAttribute('fill', 'var(--accent-rose)')
                addLog(`Server NODE_${id.toUpperCase()} failed health check!`, 'error')
            }
        }

        // Selection Algorithm
        function getTargetServer() {
            const onlineServers = state.servers.filter(s => s.online)
            if (onlineServers.length === 0) return null

            const algo = algoSelect.value

            if (algo === 'round-robin') {
                let attempts = 0
                while (attempts < 3) {
                    const server = state.servers[state.roundRobinIndex]
                    state.roundRobinIndex = (state.roundRobinIndex + 1) % 3
                    if (server.online) return server
                    attempts++
                }
            } else if (algo === 'least-conn') {
                return onlineServers.sort((a, b) => a.connections - b.connections)[0]
            } else {
                return onlineServers[Math.floor(Math.random() * onlineServers.length)]
            }
            return null
        }

        // Animate Packet Flow
        async function animatePacket(pathId) {
            const path = document.getElementById(pathId)
            const packet = templatePacket.cloneNode(true)
            packet.removeAttribute('id')
            packet.style.offsetPath = `path('${path.getAttribute('d')}')`
            architectureSvg.appendChild(packet)

            packet.classList.add('animate-packet')

            return new Promise(resolve => {
                setTimeout(() => {
                    packet.remove()
                    resolve()
                }, 1000) // 1s animation duration matches CSS
            })
        }

        // Main Simulation Logic
        async function runSimulation() {
            if (state.isProcessing) return
            state.isProcessing = true
            simulateBtn.disabled = true

            addLog("Incoming client request received.")

            // 1. User to LB
            await animatePacket('path-user-lb')

            // 2. Load Balancer Decision
            const target = getTargetServer()
            if (!target) {
                addLog("502 Bad Gateway: No healthy upstream servers available!", 'error')
                state.isProcessing = false
                simulateBtn.disabled = false
                return
            }

            addLog(`LB routing request to NODE_${target.id.toUpperCase()} (Algo: ${algoSelect.value})`)
            target.connections++

            // 3. LB to Server
            const lbToServerPath = `path-lb-${target.id}`
            const serverToDbPath = `path-${target.id}-db`

            // Highlight path
            const pathLine1 = document.getElementById(lbToServerPath)
            pathLine1.classList.add('active')

            await animatePacket(lbToServerPath)

            // 4. Server to DB
            const pathLine2 = document.getElementById(serverToDbPath)
            pathLine2.classList.add('active')

            addLog(`NODE_${target.id.toUpperCase()} querying database cluster...`)
            await animatePacket(serverToDbPath)

            // Finish
            setTimeout(() => {
                pathLine1.classList.remove('active')
                pathLine2.classList.remove('active')
                addLog(`Request completed successfully via NODE_${target.id.toUpperCase()}.`, 'success')
                state.isProcessing = false
                simulateBtn.disabled = false
            }, 500)
        }

        // Event Listeners
        simulateBtn.addEventListener('click', runSimulation)

        // Boot
        window.onload = initControls;
    </script>


</body>

</html>